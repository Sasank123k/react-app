import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import java.util.List;

@RestController
@RequestMapping("/api/sors")
@CrossOrigin(origins = "http://localhost:3000") // Allow requests from your React app
public class SorController {

    @Autowired
    private SorService sorService;

    @GetMapping("/names")
    public ResponseEntity<List<String>> getAllSorNames() {
        return ResponseEntity.ok(sorService.getAllSorNames());
    }

    @GetMapping("/{sorName}")
    public ResponseEntity<Sor> getSorDetails(@PathVariable String sorName) {
        return ResponseEntity.ok(sorService.getSorDetails(sorName));
    }

    @PutMapping("/{sorName}")
    public ResponseEntity<Sor> updateSorDetails(@PathVariable String sorName, @RequestBody SorDto sorDto) {
        return ResponseEntity.ok(sorService.updateSorDetails(sorName, sorDto));
    }
}










        import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import java.util.List;
import java.util.stream.Collectors;

@Service
public class SorService {

    @Autowired
    private SorRepository sorRepository;

    public List<String> getAllSorNames() {
        return sorRepository.findAll().stream()
                .map(Sor::getSorName)
                .collect(Collectors.toList());
    }

    public Sor getSorDetails(String sorName) {
        return sorRepository.findBySorName(sorName)
                .orElseThrow(() -> new RuntimeException("SOR not found: " + sorName));
    }

    public Sor updateSorDetails(String sorName, SorDto sorDto) {
        Sor sor = sorRepository.findBySorName(sorName)
                .orElseThrow(() -> new RuntimeException("SOR not found: " + sorName));

        sor.setUserField1(sorDto.getUserField1());
        sor.setUserField2(sorDto.getUserField2());

        return sorRepository.save(sor);
    }
}
