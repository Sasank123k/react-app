Ace Editor itself does not include built‑in SQL auto formatting. However, you can add auto formatting functionality by using a separate package such as sql-formatter. This package accepts a SQL string and returns a neatly formatted version.

Below, I’ll show you how to update your sqleditor.jsx file to include an "Auto Format" button that applies the formatting.


---

Updated File 1: sqleditor.jsx

import React, { useState } from "react";
import AceEditor from "react-ace";
import ace from "ace-builds";
import sqlFormatter from "sql-formatter";
import "./SqlEditor.css";

// Import Ace packages: SQL mode, a theme, and the language tools extension.
import "ace-builds/src-noconflict/mode-sql";
import "ace-builds/src-noconflict/theme-github";
import "ace-builds/src-noconflict/ext-language_tools";

// Define a custom completer for SQL keywords.
const customSqlCompleter = {
  getCompletions: function(editor, session, pos, prefix, callback) {
    if (prefix.length === 0) {
      callback(null, []);
      return;
    }
    const keywords = [
      "SELECT",
      "FROM",
      "WHERE",
      "INSERT",
      "UPDATE",
      "DELETE",
      "JOIN"
    ];
    const completions = keywords.map((word) => ({
      caption: word,
      value: word,
      meta: "keyword"
    }));
    callback(null, completions);
  }
};

// Register the custom completer with Ace's language tools.
ace.require("ace/ext/language_tools").addCompleter(customSqlCompleter);

const SqlEditor = () => {
  const [sqlContent, setSqlContent] = useState("SELECT * FROM your_table;");

  const handleChange = (newValue) => {
    setSqlContent(newValue);
  };

  // Function to auto format the SQL content
  const handleFormat = () => {
    try {
      const formatted = sqlFormatter.format(sqlContent);
      setSqlContent(formatted);
    } catch (error) {
      console.error("Formatting Error:", error);
    }
  };

  return (
    <div className="sql-editor-container">
      <div className="editor-controls">
        <button onClick={handleFormat}>Auto Format</button>
      </div>
      <AceEditor
        mode="sql"
        theme="github"
        name="sqlEditor"
        onChange={handleChange}
        fontSize={14}
        value={sqlContent}
        setOptions={{
          enableBasicAutocompletion: true,
          enableLiveAutocompletion: true,
          enableSnippets: true,
          showLineNumbers: true,
          tabSize: 2
        }}
        style={{ width: "100%", height: "500px" }}
      />
    </div>
  );
};

export default SqlEditor;


---

File 2: SqlEditor.css

.sql-editor-container {
  margin: 20px auto;
  width: 90%;
  max-width: 1200px;
  border: 1px solid #ddd;
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.editor-controls {
  margin: 10px;
  text-align: right;
}

.editor-controls button {
  padding: 8px 12px;
  font-size: 14px;
  border: none;
  border-radius: 4px;
  background-color: #007bff;
  color: #fff;
  cursor: pointer;
}

.editor-controls button:hover {
  background-color: #0056b3;
}


---

How It Works

1. Installation:

Make sure you install both the Ace Editor dependencies and the sql-formatter package:

npm install react-ace ace-builds sql-formatter


2. Custom Completer:

The custom completer is still in place to provide basic SQL keyword suggestions.


3. Auto Format Function:

The handleFormat function uses sqlFormatter.format(sqlContent) to convert the current SQL in the editor into a nicely formatted string.

The formatted SQL is then set as the editor's content.



4. UI Enhancements:

An "Auto Format" button is added above the editor. When clicked, it triggers the auto format function.




---

This approach lets you take advantage of Ace Editor’s robust editing features, while using an external library to add a SQL auto formatting feature. Feel free to extend or adjust the styling and functionality as needed!

